/* LÃ³gico_1: */

CREATE TABLE USUARIOS (
    USR_ID INT PRIMARY KEY,
    USR_USERNAME VARCHAR(100),
    USR_SENHA VARCHAR(100),
    USR_EMAIL VARCHAR(100),
    USR_NOME_COMPLETO VARCHAR(100),
    USR_STAFF BOOL
);

CREATE TABLE TOPICOS (
    TOP_ID INT PRIMARY KEY,
    TOP_TITULO VARCHAR(100),
    TOP_MENSAGEM VARCHAR(500),
    FK_USUARIOS_USR_ID INT
);

CREATE TABLE TAGS (
    TAG_ID INT PRIMARY KEY,
    TAG_NOME VARCHAR(100),
    FK_USUARIOS_USR_ID INT
);

CREATE TABLE POSTS (
    POS_MENSAGEM varchar(100),
    POS_ID integer PRIMARY KEY,
    POS_URL_FOTO varchar(100),
    FK_USUARIOS_USR_ID INT
);

CREATE TABLE TICKETS (
    TIC_ID INTEGER PRIMARY KEY,
    TIC_MENSAGEM VARCHAR(100),
    FK_USUARIOS_USR_ID INT
);

CREATE TABLE TIPO_DENUNCIA (
    TIP_ID INTEGER PRIMARY KEY,
    TIP_NOME VARCHAR(100)
);

CREATE TABLE POSSUI (
    FK_TOPICOS_TOP_ID INT,
    FK_TAGS_TAG_ID INT
);

CREATE TABLE RECEBE (
    FK_TIPO_DENUNCIA_TIP_ID INTEGER,
    FK_TICKETS_TIC_ID INTEGER
);
 
ALTER TABLE TOPICOS ADD CONSTRAINT FK_TOPICOS_2
    FOREIGN KEY (FK_USUARIOS_USR_ID)
    REFERENCES USUARIOS (USR_ID)
    ON DELETE CASCADE;
 
ALTER TABLE TAGS ADD CONSTRAINT FK_TAGS_2
    FOREIGN KEY (FK_USUARIOS_USR_ID)
    REFERENCES USUARIOS (USR_ID)
    ON DELETE CASCADE;
 
ALTER TABLE POSTS ADD CONSTRAINT FK_POSTS_2
    FOREIGN KEY (FK_USUARIOS_USR_ID)
    REFERENCES USUARIOS (USR_ID)
    ON DELETE CASCADE;
 
ALTER TABLE TICKETS ADD CONSTRAINT FK_TICKETS_2
    FOREIGN KEY (FK_USUARIOS_USR_ID)
    REFERENCES USUARIOS (USR_ID)
    ON DELETE CASCADE;
 
ALTER TABLE POSSUI ADD CONSTRAINT FK_POSSUI_1
    FOREIGN KEY (FK_TOPICOS_TOP_ID)
    REFERENCES TOPICOS (TOP_ID)
    ON DELETE RESTRICT;
 
ALTER TABLE POSSUI ADD CONSTRAINT FK_POSSUI_2
    FOREIGN KEY (FK_TAGS_TAG_ID)
    REFERENCES TAGS (TAG_ID)
    ON DELETE RESTRICT;
 
ALTER TABLE RECEBE ADD CONSTRAINT FK_RECEBE_1
    FOREIGN KEY (FK_TIPO_DENUNCIA_TIP_ID)
    REFERENCES TIPO_DENUNCIA (TIP_ID)
    ON DELETE RESTRICT;
 
ALTER TABLE RECEBE ADD CONSTRAINT FK_RECEBE_2
    FOREIGN KEY (FK_TICKETS_TIC_ID)
    REFERENCES TICKETS (TIC_ID)
    ON DELETE SET NULL;